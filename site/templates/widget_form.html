{# site/templates/widget_form.html - Renders a wtform
 # Copyright (C) 2026 Aaron Reichenbach
 #
 # This program is free software: you can redistribute it and/or modify
 # it under the terms of the GNU Affero General Public License as
 # published by the Free Software Foundation, either version 3 of the
 # License, or (at your option) any later version.

 # This program is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU Affero General Public License for more details.

 # You should have received a copy of the GNU Affero General Public License
 # along with this program.  If not, see <https://www.gnu.org/licenses/>.#}
{% from 'macros/renderer.html' import render_component %}
<form action="{{ this.action }}" method="{{ this.method }}" class="wid-form"{% if this.form_id %} id="{{ this.form_id }}"{% endif %}>
    {{ this.form.hidden_tag() }}
{% for field in this.form %}
{% if field.type not in ['CSRFTokenField', 'HiddenField', 'SubmitField'] %}
    <div class="wid-form-group">
        {{ field.label }}
        {{ field(class="wid-form-control") }}
{% if field.errors %}
        <ul class="wid-form-errors">
{% for error in field.errors %}
            <li>{{ error }}</li>
{% endfor %}
        </ul>
{% endif %}
    </div>
{% endif %}
{% endfor %}
{% if this.render_actions %}
    <div class="wid-form-actions">
{% for button in this.buttons %}
        {{ render_component(button) }}
{% endfor %}
    </div>
{% endif %}
</form>
