<!-- base.html - Main site template
Copyright (C) 2026 Aaron Reichenbach

This program is free software: you can redistribute it and/or modify         
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} - .scavengers</title>
    
    {% block stylesheets %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layout.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
    {% endblock %}
    
</head>
<body>
    <div id="layout-wrapper">
        <aside id="layout-sidebar">
            <header id="user-profile">
                <span>//</span>
                {% if session.get('username') %}
                <data value="{{ session['uid'] }}">{{ session['username'] }}</data>
                {% endif %}
            </header>
            
            <nav aria-label="Main Navigation">
                <ul id="navigation-list">
                    {% if session.get('username') %} {# Fixed typo: sesion -> session #}
                    
                        {% if session['role'] == 'admin' %}
                        <li class="nav-item nav-item-admin"><a href="{{ url_for('admin.dashboard') }}">admin</a></li>
                        <li class="nav-item-break"></li>
                        {% endif %}

                        {% if session['role'] in ['admin', 'user'] %}
                        <li class="nav-item nav-item-user"><a href="{{ url_for('user.media') }}">media</a></li>
                        <li class="nav-item nav-item-user"><a href="{{ url_for('user.req') }}">requests</a></li>
                        <li class="nav-item nav-item-user"><a href="{{ url_for('user.report') }}">reports</a></li>
                        <li class="nav-item nav-item-user"><a href="{{ url_for('user.dev') }}">dev</a></li>
                        <li class="nav-item-break"></li>
                        {% endif %}

                        {% if session['role'] in ['admin', 'user', 'social'] %}
                        <li class="nav-item nav-item-social"><a href="{{ url_for('social.announce') }}">announce</a></li> {# Fixed quote #}
                        <li class="nav-item nav-item-social"><a href="{{ url_for('social.feed') }}">feed</a></li>
                        <li class="nav-item nav-item-social"><a href="{{ url_for('social.chat') }}">chat</a></li>
                        <li class="nav-item nav-item-social"><a href="{{ url_for('social.board') }}">board</a></li>
                        <li class="nav-item nav-item-social"><a href="{{ url_for('social.profile') }}">profile</a></li>
                        <li class="nav-item-break"></li>
                        {% endif %}

                        <li class="nav-item text-critical"><a href="{{ url_for('auth.logout') }}">logout</a></li>
                    
                    {% else %}
                        <li class="nav-item"><a href="{{ url_for('auth.login') }}">login</a></li>
                        <li class="nav-item"><a href="{{ url_for('auth.register') }}">register</a></li>
                    {% endif %}
                </ul>
            </nav>

            <section id="node-status">
                <h3>node status</h3>
                <dl>
                        <dt>chell</dt><dd>online</dd>
                        <dt>jill</dt><dd>online</dd>
                        <dt>emily</dt><dd>offline</dd>
                        <dt>aya</dt><dd>online</dd>
                </dl>
            </section>
        </aside>

        <main>
            <header>
                <h1>.scavengers</h1>
            </header>

            {% with messages = get_flashed_messages() %}
            
            <div id="flash-messages" role="alert" aria-live="polite">
                <p class="flash-message">> {% for message in messages %} {{ message }} {% endfor %}</p>
            </div>
            
            {% endwith %}

            {% block content %}{% endblock %}
        </main>

        <aside id="layout-scroller" aria-hidden="true">
            <pre id="scroller-content"></pre>
        </aside>
    </div>
</body>
</html>