/*   layout.css - Styling related to geometry and sizing of widget components
#    Copyright (C) 2026  Aaron Reichenbach
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU Affero General Public License as published
#    by the Free Software Foundation, either version 3 of the License, or
#    (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU Affero General Public License for more details.
#
#    You should have received a copy of the GNU Affero General Public License
#    along with this program.  If not, see <https://www.gnu.org/licenses/>. */

/* ========================================================================= */
/* RESET & BOX MODEL */
*, *::before, *::after {
    box-sizing: border-box;
}

html, body {
    width: 100%;
    height: 100%;
    margin: var(--space-0);
    padding: var(--space-0);
    overflow: hidden;
}

/* ========================================================================= */
/* APP SHELL LAYOUT */

#layout-wrapper {
    display: flex;
    width: 100%;
    height: 100%;
    background-color: var(--bg-colour-primary);
}

#layout-sidebar {
    width: 260px;
    flex-shrink: 0;
}

#layout-scroller {
    width: 0;
    flex-shrink: 0;
}

main {
    flex-grow: 1;
    height: 100%;
    overflow-y: auto;
    padding: var(--space-l);
    display: flex;
    flex-direction: column;
    align-items: center; 
}

/* ========================================================================= */
/* BASE LAYOUT */

.base-header {
    display: block;
    width: var(--width-full);
    margin: var(--space-0);
    padding: var(--space-m);
}

main {
    display: block;
    width: var(--width-full);
    max-width: var(--width-max-main);
    margin: var(--space-0) auto;
    padding: var(--space-l);
}

/* ========================================================================= */
/* PANEL LAYOUT */
.panel {
    display: flex;
    flex-direction: column;
    width: var(--width-full);
    margin-bottom: var(--space-l);
}

.panel header {
    padding: var(--space-m);
}

.panel header h1 {
    margin: 0 0 var(--space-xs) 0;
}

.panel header .subtitle {
    margin: 0;
}

.panel header .meta {
    display: flex;
    align-items: baseline;
    width: 100%;
    margin: var(--space-xs) 0 0 0;
}

.panel header .meta dt:nth-of-type(2) {
    display: none;
}

.panel header .meta dd {
    margin-left: 0.2rem;
}

.panel header .meta dd:nth-of-type(2) {
    margin-left: auto;
    margin-right: var(--space-xs);
}

/* Nav Tabs */
.panel header nav ul {
    display: flex;
    list-style: none;
    margin: var(--space-m) 0 0 0;
    padding: 0;
    gap: var(--space-m);
}

/* Toolbar */
.panel .toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-s) var(--space-m);
}
.panel .toolbar .filters {
    display: flex;
    gap: var(--space-s);
}

/* Content */
.panel .content {
    padding: var(--space-m);
    flex-grow: 1;
}

.panel .content.grid-layout {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: var(--space-m);
}

/* Footer */
.panel footer {
    padding: var(--space-0);
    margin: 0;
    margin-top: var(--space-m);
    padding-top: var(--space-m);
    padding-bottom: var(--space-s);
    padding-left: var(--space-s);
    padding-right: var(--space-s);
}

.panel footer p {
    margin: 0;
    padding: 0;
}

.panel footer nav.pagination {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* ========================================================================= */
/* CARD LAYOUT */
.card {
    display: flex;
    flex-direction: column;
    height: 100%;
    padding: var(--space-m);
}

.card header {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: flex-start;
    padding: 0;
    margin-bottom: var(--space-s);
}

.card .content {
    flex-grow: 1;
    padding: 0;
    margin-bottom: var(--space-m);
}

.card footer {
    padding: 0;
    margin-top: auto;
}

.tag-cloud {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
}

/* ========================================================================= */
/* FORM LAYOUT */
.form-grid {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-m);
}

.field-group {
    display: flex;
    flex-direction: column;
    width: 100%;
}

/* Width Utility Classes for Fields */
.field-group.full-width { width: 100%; }
.field-group.half-width { width: calc(50% - (var(--space-m) / 2)); }
.field-group.one-third-width { width: calc(33.333% - (var(--space-m) * 0.66)); }

.field-group label {
    margin-bottom: var(--space-xs);
}

.field-group input,
.field-group textarea {
    width: 100%;
}

.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: var(--space-s);
    margin-top: var(--space-m);
    padding-top: var(--space-m);
}

/* ========================================================================= */
/* TABLE LAYOUT */
.table-container {
    width: 100%;
    overflow-x: auto;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: var(--space-s) var(--space-m);
    text-align: left;
}

.col-actions {
    width: 1%;
    white-space: nowrap;
    text-align: right;
}

.action-group {
    display: flex;
    justify-content: flex-end;
    gap: var(--space-xs);
}

/* ========================================================================= */
/* MODAL LAYOUT */
dialog.modal {
    margin: auto;
    padding: 0;
    width: 100%;
    max-width: 500px;
    z-index: var(--z-modal);
}

dialog.modal header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-m);
}

dialog.modal .content {
    padding: var(--space-m);
}

dialog.modal menu {
    display: flex;
    justify-content: flex-end;
    gap: var(--space-s);
    padding: var(--space-m);
    margin: 0;
}

.details-grid {
    display: grid;
    grid-template-columns: 100px auto;
    gap: var(--space-s) var(--space-m);
    margin: 0;
}
.details-grid dt { text-align: right; }
.details-grid dd { margin: 0; }

/* ========================================================================= */
/* BUTTONS & UTILS */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-xs) var(--space-m);
    cursor: pointer;
    text-decoration: none;
}

.btn.icon-only {
    width: 32px;
    height: 32px;
    padding: 0;
}

/* Utilities */
.hidden { display: none; }
.flex-wrap { display: flex; flex-wrap: wrap; }
.gap-m { gap: var(--space-m); }